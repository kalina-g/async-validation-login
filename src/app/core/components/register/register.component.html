<section class="container">
  <div class="row section-wrapper">
    <div class="col-md-6 offset-md-3">
      <h2>Register</h2>

      <form [formGroup]="registerForm">

        <div class="form-group">
          <label for="username">Nickname</label>
          <input type="text" formControlName="username" class="form-control" />
          <div class="form-err"
            *ngIf=" registerForm.get('username').touched && registerForm.get('username').hasError('required')">
            Nickname required
          </div>
          <div class="form-err"
            *ngIf=" registerForm.get('username').touched && registerForm.get('username').hasError('maxlength')">
            Max 40 characters
          </div>
          <div class="form-err" *ngIf=" registerForm.get('username').hasError('nameTaken')">
            Nickname already taken
          </div>
        </div>

        <div class="form-group">
          <label for="password">Email</label>
          <input type="email" formControlName="email" class="form-control" />
          <div class="form-err"
            *ngIf=" registerForm.get('email').touched && registerForm.get('email').hasError('required')">
            Email required
          </div>
          <div class="form-err"
            *ngIf=" registerForm.get('email').touched && registerForm.get('email').hasError('maxlength')">
            Max 40 characters
          </div>
          <div class="form-err" *ngIf=" registerForm.get('email').hasError('emailTaken')">
            Email already taken
          </div>
          <div class="form-err" *ngIf=" registerForm.get('email').hasError('email')">
             Please enter valid email
            </div>
        </div>

        <div class="form-group" formGroupName="passwordGroup">
          <label for="password">Password</label>
          <input type="password" formControlName="password" class="form-control" />
          <div class="form-err"
            *ngIf="registerForm.get('passwordGroup.password').touched && registerForm.get('passwordGroup.password').hasError('required')">
            Pass required
          </div>

          <label for="password">Confirm password</label>
          <input type="password" formControlName="confirmPassword" class="form-control" />
          <div class="form-err" *ngIf="registerForm.get('passwordGroup.confirmPassword').touched && 
              (registerForm.get('passwordGroup.confirmPassword').hasError('required') || 
              registerForm.get('passwordGroup').hasError('match')) ">
            <span *ngIf="registerForm.get('passwordGroup.confirmPassword').hasError('required')">
              Confirm password required
            </span>
            <span *ngIf="registerForm.get('passwordGroup').hasError('match')">
              Password doesn't match
            </span>
          </div>
        </div>

        <div class="form-group">
          <label for="phone">Phone</label>
          <input type="text" formControlName="phone" class="form-control" />
          <div class="form-err"
            *ngIf=" registerForm.get('phone').touched && registerForm.get('phone').hasError('required')">
            Phone required
          </div>
          <div class="form-err"
            *ngIf=" registerForm.get('phone').touched && registerForm.get('phone').hasError('maxlength')">
            Max14 characters
          </div>
        </div>

        <div class="form-group">
          <label for="country">Country</label>
          <select formControlName="country" class="form-control">
            <option value="Bulgaria">Bulgaria</option>
            <option value="Afganistan">Afganistan</option>
            <option value="Estonia">Estonia</option>
          </select>

          <div class="form-err"
            *ngIf=" registerForm.get('country').touched && registerForm.get('country').hasError('required')">
            Country required
          </div>
        </div>

        <div class="form-group">
          <button [disabled]="registerForm.invalid" class="btn btn-primary" (click)="onSubmit()">Register</button>
          <span> Have an account? </span><a routerLink="/login" class="btn-link">Log in</a>
        </div>

      </form>

    </div>
  </div>
</section>